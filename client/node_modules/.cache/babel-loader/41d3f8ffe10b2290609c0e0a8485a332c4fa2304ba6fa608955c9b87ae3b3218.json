{"ast":null,"code":"var _jsxFileName = \"E:\\\\purplesaloon\\\\client\\\\src\\\\pages\\\\TokenForm.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Container, Typography, TextField, Button, Grid, CircularProgress, Alert, Box, Paper, Snackbar } from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { TokenContext } from '../context/TokenContext';\nimport { supabase } from '../utils/supabase';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TokenForm = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    state: {\n      gender,\n      service\n    }\n  } = useLocation();\n  const {\n    addToken\n  } = useContext(TokenContext);\n  const [formData, setFormData] = useState({\n    name: '',\n    mobile: '',\n    otp: ''\n  });\n  const [otpSent, setOtpSent] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: ''\n  });\n  const [session, setSession] = useState(null);\n\n  // Format phone number to E.164 format (required by Supabase)\n  const formatPhoneNumber = phone => {\n    // Remove all non-digit characters\n    const cleaned = phone.replace(/\\D/g, '');\n\n    // For Indian numbers (10 digits)\n    if (cleaned.length === 10) {\n      return `+91${cleaned}`; // India country code\n    }\n\n    // If it's 12 digits (91 followed by 10-digit number)\n    if (cleaned.length === 12 && cleaned.startsWith('91')) {\n      return `+${cleaned}`;\n    }\n\n    // If it's 11 digits (0 followed by 10-digit number)\n    if (cleaned.length === 11 && cleaned.startsWith('0')) {\n      return `+91${cleaned.substring(1)}`;\n    }\n\n    // If it already has a + but no country code\n    if (phone.startsWith('+') && phone.length < 12) {\n      return `+91${phone.substring(1).replace(/\\D/g, '')}`;\n    }\n\n    // If it doesn't start with + but has 10+ digits\n    if (cleaned.length >= 10) {\n      return `+${cleaned}`;\n    }\n\n    // Default case - return as is (will likely fail validation)\n    return phone.startsWith('+') ? phone : `+${phone}`;\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSendOTP = async () => {\n    if (!formData.mobile || !formData.name) {\n      setSnackbar({\n        open: true,\n        message: 'Please enter both name and mobile number',\n        severity: 'error'\n      });\n      return;\n    }\n\n    // Debug: Log environment variables\n    console.log('Supabase URL:', process.env.REACT_APP_SUPABASE_URL);\n    console.log('Supabase Anon Key:', process.env.REACT_APP_SUPABASE_ANON_KEY ? 'Present' : 'Missing');\n    try {\n      setIsLoading(true);\n      setErrorMessage('');\n\n      // Format and validate phone number\n      const formattedPhone = formatPhoneNumber(formData.mobile);\n\n      // Basic validation for Indian numbers\n      if (!formattedPhone.startsWith('+91') || formattedPhone.length !== 13) {\n        throw new Error('Please enter a valid 10-digit Indian mobile number');\n      }\n      console.log('Attempting to send OTP to:', formattedPhone);\n      console.log('Sending OTP to:', formattedPhone);\n      console.log('Supabase client config:', {\n        url: supabase.supabaseUrl,\n        key: supabase.supabaseKey ? 'Present' : 'Missing'\n      });\n      const {\n        data,\n        error\n      } = await supabase.auth.signInWithOtp({\n        phone: formattedPhone,\n        options: {\n          data: {\n            name: formData.name,\n            gender,\n            service\n          },\n          shouldCreateUser: true,\n          channel: 'sms'\n        }\n      });\n      console.log('Supabase Auth response:', {\n        data,\n        error\n      });\n      if (error) {\n        console.error('Supabase Auth Error:', error);\n\n        // Handle specific Twilio errors\n        if (error.message.includes('Twilio: Invalid phone number')) {\n          throw new Error('Please enter a valid mobile number');\n        } else if (error.message.includes('Twilio: Unverified phone number')) {\n          throw new Error('This number is not verified in Twilio trial account. Please use a verified number.');\n        } else if (error.message.includes('Twilio: Invalid Access Token')) {\n          throw new Error('Authentication error with SMS service. Please try again later.');\n        } else {\n          throw error;\n        }\n      }\n      setOtpSent(true);\n      setSnackbar({\n        open: true,\n        message: 'OTP sent successfully to your mobile!',\n        severity: 'success'\n      });\n    } catch (error) {\n      console.error('Error in handleSendOTP:', error);\n      setSnackbar({\n        open: true,\n        message: error.message || 'Failed to send OTP. Please try again.',\n        severity: 'error'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleVerifyOTP = async e => {\n    e.preventDefault();\n    if (!formData.otp) {\n      setErrorMessage('Please enter the OTP');\n      return;\n    }\n    try {\n      var _session$user;\n      setIsVerifying(true);\n      setErrorMessage('');\n\n      // Verify OTP with Supabase\n      const formattedPhone = formatPhoneNumber(formData.mobile);\n      const {\n        data,\n        error\n      } = await supabase.auth.verifyOtp({\n        phone: formattedPhone,\n        token: formData.otp,\n        type: 'sms'\n      });\n      if (error) throw error;\n\n      // Get the user session\n      const {\n        data: {\n          session\n        }\n      } = await supabase.auth.getSession();\n      setSession(session);\n\n      // Create the token using the authenticated user's ID\n      const {\n        token,\n        error: tokenError\n      } = await addToken({\n        gender,\n        service,\n        name: formData.name,\n        mobile: formData.mobile,\n        userId: session === null || session === void 0 ? void 0 : (_session$user = session.user) === null || _session$user === void 0 ? void 0 : _session$user.id\n      });\n      if (tokenError) throw tokenError;\n\n      // Navigate to success page with token data\n      navigate('/token-success', {\n        state: {\n          token: token,\n          gender,\n          service,\n          name: formData.name\n        }\n      });\n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      setSnackbar({\n        open: true,\n        message: error.message || 'Invalid OTP. Please try again.',\n        severity: 'error'\n      });\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    sx: {\n      mt: 6\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      align: \"center\",\n      sx: {\n        mb: 4\n      },\n      children: [service, \" - \", gender.charAt(0).toUpperCase() + gender.slice(1)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          p: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          align: \"center\",\n          children: otpSent ? 'Verify OTP' : 'Enter Your Details'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), errorMessage && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mb: 2\n          },\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          open: snackbar.open,\n          autoHideDuration: 6000,\n          onClose: () => setSnackbar({\n            ...snackbar,\n            open: false\n          }),\n          anchorOrigin: {\n            vertical: 'top',\n            horizontal: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Alert, {\n            onClose: () => setSnackbar({\n              ...snackbar,\n              open: false\n            }),\n            severity: snackbar.severity || 'info',\n            sx: {\n              width: '100%'\n            },\n            children: snackbar.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), !otpSent ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Your Name\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleChange,\n            fullWidth: true,\n            disabled: isLoading,\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Mobile Number\",\n            name: \"mobile\",\n            type: \"tel\",\n            value: formData.mobile,\n            onChange: handleChange,\n            fullWidth: true,\n            disabled: isLoading,\n            inputProps: {\n              maxLength: 10,\n              pattern: '[0-9]*'\n            },\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleSendOTP,\n            disabled: !formData.name || !formData.mobile || isLoading,\n            endIcon: isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 38\n            }, this) : null,\n            children: isLoading ? 'Sending OTP...' : 'Send OTP'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Enter OTP\",\n            name: \"otp\",\n            value: formData.otp,\n            onChange: handleChange,\n            fullWidth: true,\n            disabled: isVerifying,\n            inputProps: {\n              maxLength: 6,\n              pattern: '[0-9]*'\n            },\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleVerifyOTP,\n            disabled: !formData.otp || isVerifying,\n            endIcon: isVerifying ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 40\n            }, this) : null,\n            fullWidth: true,\n            sx: {\n              mt: 2\n            },\n            children: isVerifying ? 'Verifying...' : 'Verify & Get Token'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            onClick: () => setOtpSent(false),\n            fullWidth: true,\n            sx: {\n              mt: 2\n            },\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n};\n_s(TokenForm, \"4gMdT4WP0yS7IwyaGGqGSOhMtsQ=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = TokenForm;\nexport default TokenForm;\nvar _c;\n$RefreshReg$(_c, \"TokenForm\");","map":{"version":3,"names":["React","useContext","useState","useEffect","Container","Typography","TextField","Button","Grid","CircularProgress","Alert","Box","Paper","Snackbar","useNavigate","useLocation","TokenContext","supabase","jsxDEV","_jsxDEV","Fragment","_Fragment","TokenForm","_s","navigate","state","gender","service","addToken","formData","setFormData","name","mobile","otp","otpSent","setOtpSent","isLoading","setIsLoading","isVerifying","setIsVerifying","errorMessage","setErrorMessage","snackbar","setSnackbar","open","message","session","setSession","formatPhoneNumber","phone","cleaned","replace","length","startsWith","substring","handleChange","e","value","target","prev","handleSendOTP","severity","console","log","process","env","REACT_APP_SUPABASE_URL","REACT_APP_SUPABASE_ANON_KEY","formattedPhone","Error","url","supabaseUrl","key","supabaseKey","data","error","auth","signInWithOtp","options","shouldCreateUser","channel","includes","handleVerifyOTP","preventDefault","_session$user","verifyOtp","token","type","getSession","tokenError","userId","user","id","maxWidth","sx","mt","children","variant","gutterBottom","align","mb","charAt","toUpperCase","slice","fileName","_jsxFileName","lineNumber","columnNumber","elevation","p","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width","label","onChange","fullWidth","disabled","inputProps","maxLength","pattern","color","onClick","endIcon","size","_c","$RefreshReg$"],"sources":["E:/purplesaloon/client/src/pages/TokenForm.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { \n  Container, \n  Typography, \n  TextField, \n  Button, \n  Grid, \n  CircularProgress,\n  Alert,\n  Box,\n  Paper,\n  Snackbar\n} from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { TokenContext } from '../context/TokenContext';\nimport { supabase } from '../utils/supabase';\n\nconst TokenForm = () => {\n  const navigate = useNavigate();\n  const { state: { gender, service } } = useLocation();\n  const { addToken } = useContext(TokenContext);\n\n  const [formData, setFormData] = useState({\n    name: '',\n    mobile: '',\n    otp: ''\n  });\n  const [otpSent, setOtpSent] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [snackbar, setSnackbar] = useState({ open: false, message: '' });\n  const [session, setSession] = useState(null);\n  \n  // Format phone number to E.164 format (required by Supabase)\n  const formatPhoneNumber = (phone) => {\n    // Remove all non-digit characters\n    const cleaned = phone.replace(/\\D/g, '');\n    \n    // For Indian numbers (10 digits)\n    if (cleaned.length === 10) {\n      return `+91${cleaned}`; // India country code\n    }\n    \n    // If it's 12 digits (91 followed by 10-digit number)\n    if (cleaned.length === 12 && cleaned.startsWith('91')) {\n      return `+${cleaned}`;\n    }\n    \n    // If it's 11 digits (0 followed by 10-digit number)\n    if (cleaned.length === 11 && cleaned.startsWith('0')) {\n      return `+91${cleaned.substring(1)}`;\n    }\n    \n    // If it already has a + but no country code\n    if (phone.startsWith('+') && phone.length < 12) {\n      return `+91${phone.substring(1).replace(/\\D/g, '')}`;\n    }\n    \n    // If it doesn't start with + but has 10+ digits\n    if (cleaned.length >= 10) {\n      return `+${cleaned}`;\n    }\n    \n    // Default case - return as is (will likely fail validation)\n    return phone.startsWith('+') ? phone : `+${phone}`;\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSendOTP = async () => {\n    if (!formData.mobile || !formData.name) {\n      setSnackbar({\n        open: true,\n        message: 'Please enter both name and mobile number',\n        severity: 'error'\n      });\n      return;\n    }\n    \n    // Debug: Log environment variables\n    console.log('Supabase URL:', process.env.REACT_APP_SUPABASE_URL);\n    console.log('Supabase Anon Key:', process.env.REACT_APP_SUPABASE_ANON_KEY ? 'Present' : 'Missing');\n\n    try {\n      setIsLoading(true);\n      setErrorMessage('');\n      \n      // Format and validate phone number\n      const formattedPhone = formatPhoneNumber(formData.mobile);\n      \n      // Basic validation for Indian numbers\n      if (!formattedPhone.startsWith('+91') || formattedPhone.length !== 13) {\n        throw new Error('Please enter a valid 10-digit Indian mobile number');\n      }\n      \n      console.log('Attempting to send OTP to:', formattedPhone);\n      \n      console.log('Sending OTP to:', formattedPhone);\n      console.log('Supabase client config:', {\n        url: supabase.supabaseUrl,\n        key: supabase.supabaseKey ? 'Present' : 'Missing'\n      });\n      \n      const { data, error } = await supabase.auth.signInWithOtp({\n        phone: formattedPhone,\n        options: {\n          data: {\n            name: formData.name,\n            gender,\n            service\n          },\n          shouldCreateUser: true,\n          channel: 'sms'\n        }\n      });\n      \n      console.log('Supabase Auth response:', { data, error });\n\n      if (error) {\n        console.error('Supabase Auth Error:', error);\n        \n        // Handle specific Twilio errors\n        if (error.message.includes('Twilio: Invalid phone number')) {\n          throw new Error('Please enter a valid mobile number');\n        } else if (error.message.includes('Twilio: Unverified phone number')) {\n          throw new Error('This number is not verified in Twilio trial account. Please use a verified number.');\n        } else if (error.message.includes('Twilio: Invalid Access Token')) {\n          throw new Error('Authentication error with SMS service. Please try again later.');\n        } else {\n          throw error;\n        }\n      }\n      \n      setOtpSent(true);\n      setSnackbar({ \n        open: true, \n        message: 'OTP sent successfully to your mobile!',\n        severity: 'success'\n      });\n      \n    } catch (error) {\n      console.error('Error in handleSendOTP:', error);\n      setSnackbar({\n        open: true,\n        message: error.message || 'Failed to send OTP. Please try again.',\n        severity: 'error'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleVerifyOTP = async (e) => {\n    e.preventDefault();\n    if (!formData.otp) {\n      setErrorMessage('Please enter the OTP');\n      return;\n    }\n\n    try {\n      setIsVerifying(true);\n      setErrorMessage('');\n      \n      // Verify OTP with Supabase\n      const formattedPhone = formatPhoneNumber(formData.mobile);\n      const { data, error } = await supabase.auth.verifyOtp({\n        phone: formattedPhone,\n        token: formData.otp,\n        type: 'sms'\n      });\n\n      if (error) throw error;\n\n      // Get the user session\n      const { data: { session } } = await supabase.auth.getSession();\n      setSession(session);\n      \n      // Create the token using the authenticated user's ID\n      const { token, error: tokenError } = await addToken({\n        gender,\n        service,\n        name: formData.name,\n        mobile: formData.mobile,\n        userId: session?.user?.id\n      });\n\n      if (tokenError) throw tokenError;\n      \n      // Navigate to success page with token data\n      navigate('/token-success', { \n        state: { \n          token: token,\n          gender,\n          service,\n          name: formData.name\n        } \n      });\n      \n    } catch (error) {\n      console.error('Error verifying OTP:', error);\n      setSnackbar({\n        open: true,\n        message: error.message || 'Invalid OTP. Please try again.',\n        severity: 'error'\n      });\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ mt: 6 }}>\n      <Typography variant=\"h5\" gutterBottom align=\"center\" sx={{ mb: 4 }}>\n        {service} - {gender.charAt(0).toUpperCase() + gender.slice(1)}\n      </Typography>\n      <Box sx={{ mt: 4 }}>\n        <Paper elevation={3} sx={{ p: 4 }}>\n          <Typography variant=\"h5\" gutterBottom align=\"center\">\n            {otpSent ? 'Verify OTP' : 'Enter Your Details'}\n          </Typography>\n          \n          {errorMessage && (\n            <Alert severity=\"error\" sx={{ mb: 2 }}>\n              {errorMessage}\n            </Alert>\n          )}\n          \n          <Snackbar\n            open={snackbar.open}\n            autoHideDuration={6000}\n            onClose={() => setSnackbar({ ...snackbar, open: false })}\n            anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n          >\n            <Alert \n              onClose={() => setSnackbar({ ...snackbar, open: false })} \n              severity={snackbar.severity || 'info'}\n              sx={{ width: '100%' }}\n            >\n              {snackbar.message}\n            </Alert>\n          </Snackbar>\n          \n          {!otpSent ? (\n            <>\n              <TextField\n                label=\"Your Name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                fullWidth\n                disabled={isLoading}\n                sx={{ mb: 2 }}\n              />\n              <TextField\n                label=\"Mobile Number\"\n                name=\"mobile\"\n                type=\"tel\"\n                value={formData.mobile}\n                onChange={handleChange}\n                fullWidth\n                disabled={isLoading}\n                inputProps={{ maxLength: 10, pattern: '[0-9]*' }}\n                sx={{ mb: 2 }}\n              />\n              <Button \n                type=\"submit\" \n                variant=\"contained\" \n                color=\"primary\" \n                onClick={handleSendOTP}\n                disabled={!formData.name || !formData.mobile || isLoading}\n                endIcon={isLoading ? <CircularProgress size={20} /> : null}\n              >\n                {isLoading ? 'Sending OTP...' : 'Send OTP'}\n              </Button>\n            </>\n          ) : (\n            <>\n              <TextField\n                label=\"Enter OTP\"\n                name=\"otp\"\n                value={formData.otp}\n                onChange={handleChange}\n                fullWidth\n                disabled={isVerifying}\n                inputProps={{ maxLength: 6, pattern: '[0-9]*' }}\n                sx={{ mb: 2 }}\n              />\n              <Button \n                type=\"submit\" \n                variant=\"contained\" \n                color=\"primary\" \n                onClick={handleVerifyOTP}\n                disabled={!formData.otp || isVerifying}\n                endIcon={isVerifying ? <CircularProgress size={20} /> : null}\n                fullWidth\n                sx={{ mt: 2 }}\n              >\n                {isVerifying ? 'Verifying...' : 'Verify & Get Token'}\n              </Button>\n              <Button \n                variant=\"outlined\" \n                color=\"primary\" \n                onClick={() => setOtpSent(false)}\n                fullWidth\n                sx={{ mt: 2 }}\n              >\n                Back\n              </Button>\n            </>\n          )}\n        </Paper>\n      </Box>\n    </Container>\n  );\n};\n\nexport default TokenForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}