{"ast":null,"code":"var _jsxFileName = \"E:\\\\purplesaloon\\\\client\\\\src\\\\context\\\\TokenContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TokenContext = /*#__PURE__*/createContext();\nexport const TokenProvider = ({\n  children\n}) => {\n  _s();\n  // Store all tokens with their details\n  const [tokens, setTokens] = useState([]); // {tokenNumber, gender, service, name, mobile, served, tokenType}\n\n  // Separate counters for male and female tokens\n  const [counters, setCounters] = useState({\n    male: {\n      current: 0,\n      next: 1\n    },\n    female: {\n      current: 0,\n      next: 1\n    }\n  });\n\n  // Add a new token\n  const addToken = token => {\n    const gender = token.gender.toLowerCase();\n    const tokenNumber = counters[gender].next;\n    const tokenWithNumber = {\n      ...token,\n      tokenNumber,\n      tokenType: gender,\n      tokenId: `${gender.charAt(0).toUpperCase()}${tokenNumber}`\n    };\n    setTokens(prev => [...prev, tokenWithNumber]);\n\n    // Increment the appropriate counter\n    setCounters(prev => ({\n      ...prev,\n      [gender]: {\n        ...prev[gender],\n        next: prev[gender].next + 1\n      }\n    }));\n    return tokenNumber; // Return the assigned token number\n  };\n\n  // Serve a specific token by number and gender\n  const serveToken = (tokenNumber, gender) => {\n    if (!tokenNumber) return null;\n    const genderLower = (gender || 'male').toLowerCase();\n    setTokens(prev => prev.map(t => t.tokenNumber === tokenNumber && t.gender.toLowerCase() === genderLower ? {\n      ...t,\n      served: true\n    } : t));\n\n    // Update the current token counter if the served token is higher than current\n    setCounters(prev => {\n      if (tokenNumber > prev[genderLower].current) {\n        return {\n          ...prev,\n          [genderLower]: {\n            ...prev[genderLower],\n            current: tokenNumber\n          }\n        };\n      }\n      return prev;\n    });\n    return tokenNumber;\n  };\n\n  // Get the current token for a specific gender\n  const getCurrentToken = gender => {\n    var _counters$genderLower;\n    const genderLower = gender.toLowerCase();\n    return ((_counters$genderLower = counters[genderLower]) === null || _counters$genderLower === void 0 ? void 0 : _counters$genderLower.current) || 0;\n  };\n\n  // Set the current token for a specific gender\n  const setCurrentToken = (gender, tokenNumber) => {\n    const genderLower = gender.toLowerCase();\n    setCounters(prev => ({\n      ...prev,\n      [genderLower]: {\n        ...prev[genderLower],\n        current: tokenNumber\n      }\n    }));\n  };\n\n  // Get the most recent token for a specific gender\n  const getRecentToken = gender => {\n    if (!gender) return null;\n    try {\n      const genderLower = gender.toString().toLowerCase();\n      const genderTokens = tokens.filter(t => t.gender && t.gender.toString().toLowerCase() === genderLower);\n      return genderTokens.length > 0 ? genderTokens[genderTokens.length - 1] : null;\n    } catch (error) {\n      console.error('Error getting recent token:', error);\n      return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(TokenContext.Provider, {\n    value: {\n      tokens,\n      counters,\n      getCurrentToken,\n      getRecentToken,\n      addToken,\n      serveToken\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(TokenProvider, \"ymaf2hmUZBsck72qk8jeIwrdYEY=\");\n_c = TokenProvider;\nvar _c;\n$RefreshReg$(_c, \"TokenProvider\");","map":{"version":3,"names":["React","createContext","useState","jsxDEV","_jsxDEV","TokenContext","TokenProvider","children","_s","tokens","setTokens","counters","setCounters","male","current","next","female","addToken","token","gender","toLowerCase","tokenNumber","tokenWithNumber","tokenType","tokenId","charAt","toUpperCase","prev","serveToken","genderLower","map","t","served","getCurrentToken","_counters$genderLower","setCurrentToken","getRecentToken","toString","genderTokens","filter","length","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/purplesaloon/client/src/context/TokenContext.js"],"sourcesContent":["import React, { createContext, useState } from 'react';\n\nexport const TokenContext = createContext();\n\nexport const TokenProvider = ({ children }) => {\n  // Store all tokens with their details\n  const [tokens, setTokens] = useState([]); // {tokenNumber, gender, service, name, mobile, served, tokenType}\n  \n  // Separate counters for male and female tokens\n  const [counters, setCounters] = useState({\n    male: { current: 0, next: 1 },\n    female: { current: 0, next: 1 }\n  });\n\n  // Add a new token\n  const addToken = (token) => {\n    const gender = token.gender.toLowerCase();\n    const tokenNumber = counters[gender].next;\n    const tokenWithNumber = { \n      ...token, \n      tokenNumber,\n      tokenType: gender,\n      tokenId: `${gender.charAt(0).toUpperCase()}${tokenNumber}`\n    };\n    \n    setTokens((prev) => [...prev, tokenWithNumber]);\n    \n    // Increment the appropriate counter\n    setCounters(prev => ({\n      ...prev,\n      [gender]: {\n        ...prev[gender],\n        next: prev[gender].next + 1\n      }\n    }));\n    \n    return tokenNumber; // Return the assigned token number\n  };\n\n  // Serve a specific token by number and gender\n  const serveToken = (tokenNumber, gender) => {\n    if (!tokenNumber) return null;\n    \n    const genderLower = (gender || 'male').toLowerCase();\n    \n    setTokens(prev => \n      prev.map(t => \n        (t.tokenNumber === tokenNumber && t.gender.toLowerCase() === genderLower) \n          ? { ...t, served: true } \n          : t\n      )\n    );\n    \n    // Update the current token counter if the served token is higher than current\n    setCounters(prev => {\n      if (tokenNumber > prev[genderLower].current) {\n        return {\n          ...prev,\n          [genderLower]: {\n            ...prev[genderLower],\n            current: tokenNumber\n          }\n        };\n      }\n      return prev;\n    });\n    \n    return tokenNumber;\n  };\n\n  // Get the current token for a specific gender\n  const getCurrentToken = (gender) => {\n    const genderLower = gender.toLowerCase();\n    return counters[genderLower]?.current || 0;\n  };\n\n  // Set the current token for a specific gender\n  const setCurrentToken = (gender, tokenNumber) => {\n    const genderLower = gender.toLowerCase();\n    setCounters(prev => ({\n      ...prev,\n      [genderLower]: {\n        ...prev[genderLower],\n        current: tokenNumber\n      }\n    }));\n  };\n\n  // Get the most recent token for a specific gender\n  const getRecentToken = (gender) => {\n    if (!gender) return null;\n    try {\n      const genderLower = gender.toString().toLowerCase();\n      const genderTokens = tokens.filter(t => t.gender && t.gender.toString().toLowerCase() === genderLower);\n      return genderTokens.length > 0 ? genderTokens[genderTokens.length - 1] : null;\n    } catch (error) {\n      console.error('Error getting recent token:', error);\n      return null;\n    }\n  };\n\n  return (\n    <TokenContext.Provider value={{ \n      tokens, \n      counters,\n      getCurrentToken,\n      getRecentToken,\n      addToken, \n      serveToken \n    }}>\n      {children}\n    </TokenContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}